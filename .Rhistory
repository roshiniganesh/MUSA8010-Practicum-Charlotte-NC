"B08301_002E","B08301_016E",
"B08301_018E","B08301_019E",
"B23025_004E"),
year=2017, state=37, county=119,
geometry=TRUE, output="wide") %>%
st_transform('EPSG:3358') %>%
rename(TotalPop = B25026_001E,
Whites = B02001_002E,
Africanamerican = B02001_003E,
Asian = B02001_005E,
Male = B01001_002E,
Female = B01001_026E,
FemaleBachelors = B15001_050E,
MaleBachelors = B15001_009E,
Worker= B23025_004E,
MedHHInc = B19013_001E,
MedRent = B25058_001E,
TotalPoverty = B06012_002E,
Workfromhome = B08111_031E,
Total = B08201_001E,
car0 = B08201_002E,
car1 = B08201_003E,
car2 = B08201_004E,
car3 = B08201_005E,
car4 = B08201_006E,
car5more = B08201_007E,
Commutetowork = B08301_001E,
Workwithbus = B08301_011E,
Workbycar = B08301_002E,
Workbytaxi = B08301_016E,
Workbybike = B08301_018E,
Workbywalk = B08301_019E) %>%
dplyr::select(-NAME, -starts_with("B")) %>%
mutate(PopDensity_km2 = ifelse(TotalPop > 0, TotalPop / (st_area(.) / 1e6), 0),
pctWorker = ifelse(TotalPop > 0, Worker / TotalPop,0),
WorkerDensity = ifelse(Worker > 0, Worker / (st_area(.) / 1e6), 0),
pctWhite = ifelse(TotalPop > 0, Whites / TotalPop,0),
WhiteDensity = ifelse(Worker > 0, Whites / (st_area(.) / 1e6), 0),
pctAfricanamerican = ifelse(TotalPop > 0, Africanamerican / TotalPop,0),
AfricanamericanDensity = ifelse(Worker > 0, Africanamerican / (st_area(.) / 1e6), 0),
pctAsian = ifelse(TotalPop > 0, Asian / TotalPop,0),
AsianDensity = ifelse(Worker > 0, Asian / (st_area(.) / 1e6), 0),
pctOther = ifelse(TotalPop > 0, (TotalPop - Whites - Africanamerican - Asian) / TotalPop,0),
pctMale = ifelse(TotalPop > 0, (Male / TotalPop),0),
MaleDensity = ifelse(TotalPop > 0, Male / (st_area(.) / 1e6), 0),
pctFemale = ifelse(TotalPop > 0, (Female / TotalPop),0),
FemaleDensity = ifelse(TotalPop > 0, Female / (st_area(.) / 1e6), 0),
pctBachelors = ifelse(TotalPop > 0, ((FemaleBachelors + MaleBachelors) / TotalPop),0),
BachelorDensity = ifelse(TotalPop > 0, (FemaleBachelors + MaleBachelors) / (st_area(.) / 1e6), 0),
pctPoverty = ifelse(TotalPop > 0, TotalPoverty / TotalPop, 0),
pctworkwithbus = ifelse(Commutetowork > 0, Workwithbus / Commutetowork, 0),
Densityworkbybus = ifelse(TotalPop > 0, Worker / (st_area(.) / 1e6), 0),
pctworkfromhome = ifelse(Commutetowork > 0, Workfromhome / Commutetowork, 0),
Densityworkfromhome = ifelse(TotalPop > 0, Workfromhome / (st_area(.) / 1e6), 0),
pctworkbycar = ifelse(Commutetowork > 0, Workbycar / Commutetowork, 0),
pctworkbytaxi = ifelse(Commutetowork > 0, Workbytaxi / Commutetowork, 0),
pctworkbybike = ifelse(Commutetowork > 0, Workbybike / Commutetowork, 0),
pctworkbywalk = ifelse(Commutetowork > 0, Workbywalk / Commutetowork, 0),
pctnocar = ifelse(Total > 0, car0 / Total, 0),
pct1car = ifelse(Total > 0, car1 / Total, 0),
pct2car = ifelse(Total > 0, car2 / Total, 0),
pct3car = ifelse(Total > 0, car3 / Total, 0),
pct4car = ifelse(Total > 0, car4 / Total, 0),
pct5car = ifelse(Total > 0, car5more / Total, 0),
year = "2017") %>%
dplyr::select(-Whites, -Africanamerican, -Asian, -Male, -Female, -FemaleBachelors, -MaleBachelors, -TotalPoverty)
# census 2018
dat2018 <-
get_acs(geography = "tract",
variables = c("B25026_001E","B02001_002E",
"B02001_003E","B02001_005E",
"B15001_050E","B15001_009E",
"B19013_001E","B25058_001E",
"B06012_002E","B08301_001E",
"B08301_011E","B01001_002E",
"B01001_026E","B08111_031E",
"B24080_001E","B08201_001E",
"B08201_002E","B08201_003E",
"B08201_004E","B08201_005E",
"B08201_006E","B08201_007E",
"B08301_002E","B08301_016E",
"B08301_018E","B08301_019E",
"B23025_004E"),
year=2018, state=37, county=119,
geometry=TRUE, output="wide") %>%
st_transform('EPSG:3358') %>%
rename(TotalPop = B25026_001E,
Whites = B02001_002E,
Africanamerican = B02001_003E,
Asian = B02001_005E,
Male = B01001_002E,
Female = B01001_026E,
FemaleBachelors = B15001_050E,
MaleBachelors = B15001_009E,
Worker= B23025_004E,
MedHHInc = B19013_001E,
MedRent = B25058_001E,
TotalPoverty = B06012_002E,
Workfromhome = B08111_031E,
Total = B08201_001E,
car0 = B08201_002E,
car1 = B08201_003E,
car2 = B08201_004E,
car3 = B08201_005E,
car4 = B08201_006E,
car5more = B08201_007E,
Commutetowork = B08301_001E,
Workwithbus = B08301_011E,
Workbycar = B08301_002E,
Workbytaxi = B08301_016E,
Workbybike = B08301_018E,
Workbywalk = B08301_019E) %>%
dplyr::select(-NAME, -starts_with("B")) %>%
mutate(PopDensity_km2 = ifelse(TotalPop > 0, TotalPop / (st_area(.) / 1e6), 0),
pctWorker = ifelse(TotalPop > 0, Worker / TotalPop,0),
WorkerDensity = ifelse(Worker > 0, Worker / (st_area(.) / 1e6), 0),
pctWhite = ifelse(TotalPop > 0, Whites / TotalPop,0),
WhiteDensity = ifelse(Worker > 0, Whites / (st_area(.) / 1e6), 0),
pctAfricanamerican = ifelse(TotalPop > 0, Africanamerican / TotalPop,0),
AfricanamericanDensity = ifelse(Worker > 0, Africanamerican / (st_area(.) / 1e6), 0),
pctAsian = ifelse(TotalPop > 0, Asian / TotalPop,0),
AsianDensity = ifelse(Worker > 0, Asian / (st_area(.) / 1e6), 0),
pctOther = ifelse(TotalPop > 0, (TotalPop - Whites - Africanamerican - Asian) / TotalPop,0),
pctMale = ifelse(TotalPop > 0, (Male / TotalPop),0),
MaleDensity = ifelse(TotalPop > 0, Male / (st_area(.) / 1e6), 0),
pctFemale = ifelse(TotalPop > 0, (Female / TotalPop),0),
FemaleDensity = ifelse(TotalPop > 0, Female / (st_area(.) / 1e6), 0),
pctBachelors = ifelse(TotalPop > 0, ((FemaleBachelors + MaleBachelors) / TotalPop),0),
BachelorDensity = ifelse(TotalPop > 0, (FemaleBachelors + MaleBachelors) / (st_area(.) / 1e6), 0),
pctPoverty = ifelse(TotalPop > 0, TotalPoverty / TotalPop, 0),
pctworkwithbus = ifelse(Commutetowork > 0, Workwithbus / Commutetowork, 0),
Densityworkbybus = ifelse(TotalPop > 0, Worker / (st_area(.) / 1e6), 0),
pctworkfromhome = ifelse(Commutetowork > 0, Workfromhome / Commutetowork, 0),
Densityworkfromhome = ifelse(TotalPop > 0, Workfromhome / (st_area(.) / 1e6), 0),
pctworkbycar = ifelse(Commutetowork > 0, Workbycar / Commutetowork, 0),
pctworkbytaxi = ifelse(Commutetowork > 0, Workbytaxi / Commutetowork, 0),
pctworkbybike = ifelse(Commutetowork > 0, Workbybike / Commutetowork, 0),
pctworkbywalk = ifelse(Commutetowork > 0, Workbywalk / Commutetowork, 0),
pctnocar = ifelse(Total > 0, car0 / Total, 0),
pct1car = ifelse(Total > 0, car1 / Total, 0),
pct2car = ifelse(Total > 0, car2 / Total, 0),
pct3car = ifelse(Total > 0, car3 / Total, 0),
pct4car = ifelse(Total > 0, car4 / Total, 0),
pct5car = ifelse(Total > 0, car5more / Total, 0),
year = "2018") %>%
dplyr::select(-Whites, -Africanamerican, -Asian, -Male, -Female, -FemaleBachelors, -MaleBachelors, -TotalPoverty)
# census 2019
dat2019 <-
get_acs(geography = "tract",
variables = c("B25026_001E","B02001_002E",
"B02001_003E","B02001_005E",
"B15001_050E","B15001_009E",
"B19013_001E","B25058_001E",
"B06012_002E","B08301_001E",
"B08301_011E","B01001_002E",
"B01001_026E","B08111_031E",
"B24080_001E","B08201_001E",
"B08201_002E","B08201_003E",
"B08201_004E","B08201_005E",
"B08201_006E","B08201_007E",
"B08301_002E","B08301_016E",
"B08301_018E","B08301_019E",
"B23025_004E"),
year=2019, state=37, county=119,
geometry=TRUE, output="wide") %>%
st_transform('EPSG:3358') %>%
rename(TotalPop = B25026_001E,
Whites = B02001_002E,
Africanamerican = B02001_003E,
Asian = B02001_005E,
Male = B01001_002E,
Female = B01001_026E,
FemaleBachelors = B15001_050E,
MaleBachelors = B15001_009E,
Worker= B23025_004E,
MedHHInc = B19013_001E,
MedRent = B25058_001E,
TotalPoverty = B06012_002E,
Workfromhome = B08111_031E,
Total = B08201_001E,
car0 = B08201_002E,
car1 = B08201_003E,
car2 = B08201_004E,
car3 = B08201_005E,
car4 = B08201_006E,
car5more = B08201_007E,
Commutetowork = B08301_001E,
Workwithbus = B08301_011E,
Workbycar = B08301_002E,
Workbytaxi = B08301_016E,
Workbybike = B08301_018E,
Workbywalk = B08301_019E) %>%
dplyr::select(-NAME, -starts_with("B")) %>%
mutate(PopDensity_km2 = ifelse(TotalPop > 0, TotalPop / (st_area(.) / 1e6), 0),
pctWorker = ifelse(TotalPop > 0, Worker / TotalPop,0),
WorkerDensity = ifelse(Worker > 0, Worker / (st_area(.) / 1e6), 0),
pctWhite = ifelse(TotalPop > 0, Whites / TotalPop,0),
WhiteDensity = ifelse(Worker > 0, Whites / (st_area(.) / 1e6), 0),
pctAfricanamerican = ifelse(TotalPop > 0, Africanamerican / TotalPop,0),
AfricanamericanDensity = ifelse(Worker > 0, Africanamerican / (st_area(.) / 1e6), 0),
pctAsian = ifelse(TotalPop > 0, Asian / TotalPop,0),
AsianDensity = ifelse(Worker > 0, Asian / (st_area(.) / 1e6), 0),
pctOther = ifelse(TotalPop > 0, (TotalPop - Whites - Africanamerican - Asian) / TotalPop,0),
pctMale = ifelse(TotalPop > 0, (Male / TotalPop),0),
MaleDensity = ifelse(TotalPop > 0, Male / (st_area(.) / 1e6), 0),
pctFemale = ifelse(TotalPop > 0, (Female / TotalPop),0),
FemaleDensity = ifelse(TotalPop > 0, Female / (st_area(.) / 1e6), 0),
pctBachelors = ifelse(TotalPop > 0, ((FemaleBachelors + MaleBachelors) / TotalPop),0),
BachelorDensity = ifelse(TotalPop > 0, (FemaleBachelors + MaleBachelors) / (st_area(.) / 1e6), 0),
pctPoverty = ifelse(TotalPop > 0, TotalPoverty / TotalPop, 0),
pctworkwithbus = ifelse(Commutetowork > 0, Workwithbus / Commutetowork, 0),
Densityworkbybus = ifelse(TotalPop > 0, Worker / (st_area(.) / 1e6), 0),
pctworkfromhome = ifelse(Commutetowork > 0, Workfromhome / Commutetowork, 0),
Densityworkfromhome = ifelse(TotalPop > 0, Workfromhome / (st_area(.) / 1e6), 0),
pctworkbycar = ifelse(Commutetowork > 0, Workbycar / Commutetowork, 0),
pctworkbytaxi = ifelse(Commutetowork > 0, Workbytaxi / Commutetowork, 0),
pctworkbybike = ifelse(Commutetowork > 0, Workbybike / Commutetowork, 0),
pctworkbywalk = ifelse(Commutetowork > 0, Workbywalk / Commutetowork, 0),
pctnocar = ifelse(Total > 0, car0 / Total, 0),
pct1car = ifelse(Total > 0, car1 / Total, 0),
pct2car = ifelse(Total > 0, car2 / Total, 0),
pct3car = ifelse(Total > 0, car3 / Total, 0),
pct4car = ifelse(Total > 0, car4 / Total, 0),
pct5car = ifelse(Total > 0, car5more / Total, 0),
year = "2019") %>%
dplyr::select(-Whites, -Africanamerican, -Asian, -Male, -Female, -FemaleBachelors, -MaleBachelors, -TotalPoverty)
# census 2020
dat2020 <-
get_acs(geography = "tract",
variables = c("B25026_001E","B02001_002E",
"B02001_003E","B02001_005E",
"B15001_050E","B15001_009E",
"B19013_001E","B25058_001E",
"B06012_002E","B08301_001E",
"B08301_011E","B01001_002E",
"B01001_026E","B08111_031E",
"B24080_001E","B08201_001E",
"B08201_002E","B08201_003E",
"B08201_004E","B08201_005E",
"B08201_006E","B08201_007E",
"B08301_002E","B08301_016E",
"B08301_018E","B08301_019E",
"B23025_004E"),
year=2020, state=37, county=119,
geometry=TRUE, output="wide") %>%
st_transform('EPSG:3358') %>%
rename(TotalPop = B25026_001E,
Whites = B02001_002E,
Africanamerican = B02001_003E,
Asian = B02001_005E,
Male = B01001_002E,
Female = B01001_026E,
FemaleBachelors = B15001_050E,
MaleBachelors = B15001_009E,
Worker= B23025_004E,
MedHHInc = B19013_001E,
MedRent = B25058_001E,
TotalPoverty = B06012_002E,
Workfromhome = B08111_031E,
Total = B08201_001E,
car0 = B08201_002E,
car1 = B08201_003E,
car2 = B08201_004E,
car3 = B08201_005E,
car4 = B08201_006E,
car5more = B08201_007E,
Commutetowork = B08301_001E,
Workwithbus = B08301_011E,
Workbycar = B08301_002E,
Workbytaxi = B08301_016E,
Workbybike = B08301_018E,
Workbywalk = B08301_019E) %>%
dplyr::select(-NAME, -starts_with("B")) %>%
mutate(PopDensity_km2 = ifelse(TotalPop > 0, TotalPop / (st_area(.) / 1e6), 0),
pctWorker = ifelse(TotalPop > 0, Worker / TotalPop,0),
WorkerDensity = ifelse(Worker > 0, Worker / (st_area(.) / 1e6), 0),
pctWhite = ifelse(TotalPop > 0, Whites / TotalPop,0),
WhiteDensity = ifelse(Worker > 0, Whites / (st_area(.) / 1e6), 0),
pctAfricanamerican = ifelse(TotalPop > 0, Africanamerican / TotalPop,0),
AfricanamericanDensity = ifelse(Worker > 0, Africanamerican / (st_area(.) / 1e6), 0),
pctAsian = ifelse(TotalPop > 0, Asian / TotalPop,0),
AsianDensity = ifelse(Worker > 0, Asian / (st_area(.) / 1e6), 0),
pctOther = ifelse(TotalPop > 0, (TotalPop - Whites - Africanamerican - Asian) / TotalPop,0),
pctMale = ifelse(TotalPop > 0, (Male / TotalPop),0),
MaleDensity = ifelse(TotalPop > 0, Male / (st_area(.) / 1e6), 0),
pctFemale = ifelse(TotalPop > 0, (Female / TotalPop),0),
FemaleDensity = ifelse(TotalPop > 0, Female / (st_area(.) / 1e6), 0),
pctBachelors = ifelse(TotalPop > 0, ((FemaleBachelors + MaleBachelors) / TotalPop),0),
BachelorDensity = ifelse(TotalPop > 0, (FemaleBachelors + MaleBachelors) / (st_area(.) / 1e6), 0),
pctPoverty = ifelse(TotalPop > 0, TotalPoverty / TotalPop, 0),
pctworkwithbus = ifelse(Commutetowork > 0, Workwithbus / Commutetowork, 0),
Densityworkbybus = ifelse(TotalPop > 0, Worker / (st_area(.) / 1e6), 0),
pctworkfromhome = ifelse(Commutetowork > 0, Workfromhome / Commutetowork, 0),
Densityworkfromhome = ifelse(TotalPop > 0, Workfromhome / (st_area(.) / 1e6), 0),
pctworkbycar = ifelse(Commutetowork > 0, Workbycar / Commutetowork, 0),
pctworkbytaxi = ifelse(Commutetowork > 0, Workbytaxi / Commutetowork, 0),
pctworkbybike = ifelse(Commutetowork > 0, Workbybike / Commutetowork, 0),
pctworkbywalk = ifelse(Commutetowork > 0, Workbywalk / Commutetowork, 0),
pctnocar = ifelse(Total > 0, car0 / Total, 0),
pct1car = ifelse(Total > 0, car1 / Total, 0),
pct2car = ifelse(Total > 0, car2 / Total, 0),
pct3car = ifelse(Total > 0, car3 / Total, 0),
pct4car = ifelse(Total > 0, car4 / Total, 0),
pct5car = ifelse(Total > 0, car5more / Total, 0),
year = "2020") %>%
dplyr::select(-Whites, -Africanamerican, -Asian, -Male, -Female, -FemaleBachelors, -MaleBachelors, -TotalPoverty)
# census 2021
dat2021 <-
get_acs(geography = "tract",
variables = c("B25026_001E","B02001_002E",
"B02001_003E","B02001_005E",
"B15001_050E","B15001_009E",
"B19013_001E","B25058_001E",
"B06012_002E","B08301_001E",
"B08301_011E","B01001_002E",
"B01001_026E","B08111_031E",
"B24080_001E","B08201_001E",
"B08201_002E","B08201_003E",
"B08201_004E","B08201_005E",
"B08201_006E","B08201_007E",
"B08301_002E","B08301_016E",
"B08301_018E","B08301_019E",
"B23025_004E"),
year=2021, state=37, county=119,
geometry=TRUE, output="wide") %>%
st_transform('EPSG:3358') %>%
rename(TotalPop = B25026_001E,
Whites = B02001_002E,
Africanamerican = B02001_003E,
Asian = B02001_005E,
Male = B01001_002E,
Female = B01001_026E,
FemaleBachelors = B15001_050E,
MaleBachelors = B15001_009E,
Worker= B23025_004E,
MedHHInc = B19013_001E,
MedRent = B25058_001E,
TotalPoverty = B06012_002E,
Workfromhome = B08111_031E,
Total = B08201_001E,
car0 = B08201_002E,
car1 = B08201_003E,
car2 = B08201_004E,
car3 = B08201_005E,
car4 = B08201_006E,
car5more = B08201_007E,
Commutetowork = B08301_001E,
Workwithbus = B08301_011E,
Workbycar = B08301_002E,
Workbytaxi = B08301_016E,
Workbybike = B08301_018E,
Workbywalk = B08301_019E) %>%
dplyr::select(-NAME, -starts_with("B")) %>%
mutate(PopDensity_km2 = ifelse(TotalPop > 0, TotalPop / (st_area(.) / 1e6), 0),
pctWorker = ifelse(TotalPop > 0, Worker / TotalPop,0),
WorkerDensity = ifelse(Worker > 0, Worker / (st_area(.) / 1e6), 0),
pctWhite = ifelse(TotalPop > 0, Whites / TotalPop,0),
WhiteDensity = ifelse(Worker > 0, Whites / (st_area(.) / 1e6), 0),
pctAfricanamerican = ifelse(TotalPop > 0, Africanamerican / TotalPop,0),
AfricanamericanDensity = ifelse(Worker > 0, Africanamerican / (st_area(.) / 1e6), 0),
pctAsian = ifelse(TotalPop > 0, Asian / TotalPop,0),
AsianDensity = ifelse(Worker > 0, Asian / (st_area(.) / 1e6), 0),
pctOther = ifelse(TotalPop > 0, (TotalPop - Whites - Africanamerican - Asian) / TotalPop,0),
pctMale = ifelse(TotalPop > 0, (Male / TotalPop),0),
MaleDensity = ifelse(TotalPop > 0, Male / (st_area(.) / 1e6), 0),
pctFemale = ifelse(TotalPop > 0, (Female / TotalPop),0),
FemaleDensity = ifelse(TotalPop > 0, Female / (st_area(.) / 1e6), 0),
pctBachelors = ifelse(TotalPop > 0, ((FemaleBachelors + MaleBachelors) / TotalPop),0),
BachelorDensity = ifelse(TotalPop > 0, (FemaleBachelors + MaleBachelors) / (st_area(.) / 1e6), 0),
pctPoverty = ifelse(TotalPop > 0, TotalPoverty / TotalPop, 0),
pctworkwithbus = ifelse(Commutetowork > 0, Workwithbus / Commutetowork, 0),
Densityworkbybus = ifelse(TotalPop > 0, Worker / (st_area(.) / 1e6), 0),
pctworkfromhome = ifelse(Commutetowork > 0, Workfromhome / Commutetowork, 0),
Densityworkfromhome = ifelse(TotalPop > 0, Workfromhome / (st_area(.) / 1e6), 0),
pctworkbycar = ifelse(Commutetowork > 0, Workbycar / Commutetowork, 0),
pctworkbytaxi = ifelse(Commutetowork > 0, Workbytaxi / Commutetowork, 0),
pctworkbybike = ifelse(Commutetowork > 0, Workbybike / Commutetowork, 0),
pctworkbywalk = ifelse(Commutetowork > 0, Workbywalk / Commutetowork, 0),
pctnocar = ifelse(Total > 0, car0 / Total, 0),
pct1car = ifelse(Total > 0, car1 / Total, 0),
pct2car = ifelse(Total > 0, car2 / Total, 0),
pct3car = ifelse(Total > 0, car3 / Total, 0),
pct4car = ifelse(Total > 0, car4 / Total, 0),
pct5car = ifelse(Total > 0, car5more / Total, 0),
year = "2021") %>%
dplyr::select(-Whites, -Africanamerican, -Asian, -Male, -Female, -FemaleBachelors, -MaleBachelors, -TotalPoverty)
# census 2022
dat2022 <-
get_acs(geography = "tract",
variables = c("B25026_001E","B02001_002E",
"B02001_003E","B02001_005E",
"B15001_050E","B15001_009E",
"B19013_001E","B25058_001E",
"B06012_002E","B08301_001E",
"B08301_011E","B01001_002E",
"B01001_026E","B08111_031E",
"B24080_001E","B08201_001E",
"B08201_002E","B08201_003E",
"B08201_004E","B08201_005E",
"B08201_006E","B08201_007E",
"B08301_002E","B08301_016E",
"B08301_018E","B08301_019E",
"B23025_004E"),
year=2022, state=37, county=119,
geometry=TRUE, output="wide") %>%
st_transform('EPSG:3358') %>%
rename(TotalPop = B25026_001E,
Whites = B02001_002E,
Africanamerican = B02001_003E,
Asian = B02001_005E,
Male = B01001_002E,
Female = B01001_026E,
FemaleBachelors = B15001_050E,
MaleBachelors = B15001_009E,
Worker= B23025_004E,
MedHHInc = B19013_001E,
MedRent = B25058_001E,
TotalPoverty = B06012_002E,
Workfromhome = B08111_031E,
Total = B08201_001E,
car0 = B08201_002E,
car1 = B08201_003E,
car2 = B08201_004E,
car3 = B08201_005E,
car4 = B08201_006E,
car5more = B08201_007E,
Commutetowork = B08301_001E,
Workwithbus = B08301_011E,
Workbycar = B08301_002E,
Workbytaxi = B08301_016E,
Workbybike = B08301_018E,
Workbywalk = B08301_019E) %>%
dplyr::select(-NAME, -starts_with("B")) %>%
mutate(PopDensity_km2 = ifelse(TotalPop > 0, TotalPop / (st_area(.) / 1e6), 0),
pctWorker = ifelse(TotalPop > 0, Worker / TotalPop,0),
WorkerDensity = ifelse(Worker > 0, Worker / (st_area(.) / 1e6), 0),
pctWhite = ifelse(TotalPop > 0, Whites / TotalPop,0),
WhiteDensity = ifelse(Worker > 0, Whites / (st_area(.) / 1e6), 0),
pctAfricanamerican = ifelse(TotalPop > 0, Africanamerican / TotalPop,0),
AfricanamericanDensity = ifelse(Worker > 0, Africanamerican / (st_area(.) / 1e6), 0),
pctAsian = ifelse(TotalPop > 0, Asian / TotalPop,0),
AsianDensity = ifelse(Worker > 0, Asian / (st_area(.) / 1e6), 0),
pctOther = ifelse(TotalPop > 0, (TotalPop - Whites - Africanamerican - Asian) / TotalPop,0),
pctMale = ifelse(TotalPop > 0, (Male / TotalPop),0),
MaleDensity = ifelse(TotalPop > 0, Male / (st_area(.) / 1e6), 0),
pctFemale = ifelse(TotalPop > 0, (Female / TotalPop),0),
FemaleDensity = ifelse(TotalPop > 0, Female / (st_area(.) / 1e6), 0),
pctBachelors = ifelse(TotalPop > 0, ((FemaleBachelors + MaleBachelors) / TotalPop),0),
BachelorDensity = ifelse(TotalPop > 0, (FemaleBachelors + MaleBachelors) / (st_area(.) / 1e6), 0),
pctPoverty = ifelse(TotalPop > 0, TotalPoverty / TotalPop, 0),
pctworkwithbus = ifelse(Commutetowork > 0, Workwithbus / Commutetowork, 0),
Densityworkbybus = ifelse(TotalPop > 0, Worker / (st_area(.) / 1e6), 0),
pctworkfromhome = ifelse(Commutetowork > 0, Workfromhome / Commutetowork, 0),
Densityworkfromhome = ifelse(TotalPop > 0, Workfromhome / (st_area(.) / 1e6), 0),
pctworkbycar = ifelse(Commutetowork > 0, Workbycar / Commutetowork, 0),
pctworkbytaxi = ifelse(Commutetowork > 0, Workbytaxi / Commutetowork, 0),
pctworkbybike = ifelse(Commutetowork > 0, Workbybike / Commutetowork, 0),
pctworkbywalk = ifelse(Commutetowork > 0, Workbywalk / Commutetowork, 0),
pctnocar = ifelse(Total > 0, car0 / Total, 0),
pct1car = ifelse(Total > 0, car1 / Total, 0),
pct2car = ifelse(Total > 0, car2 / Total, 0),
pct3car = ifelse(Total > 0, car3 / Total, 0),
pct4car = ifelse(Total > 0, car4 / Total, 0),
pct5car = ifelse(Total > 0, car5more / Total, 0),
year = "2022") %>%
dplyr::select(-Whites, -Africanamerican, -Asian, -Male, -Female, -FemaleBachelors, -MaleBachelors, -TotalPoverty)
#feature engineering proximity
school.sf <-
school %>%
dplyr::select(geometry) %>%
na.omit() %>%
filter(!st_is_empty(.))%>%
st_as_sf(coords = c("Long", "Lat"), crs = "EPSG:3358")%>%
distinct()
parks.sf <-
parks %>%
dplyr::select(geometry) %>%
na.omit() %>%
filter(!st_is_empty(.))%>%
st_as_sf(coords = c("Long", "Lat"), crs = "EPSG:3358")%>%
distinct()
groceries.sf <-
groceries %>%
dplyr::select(geometry) %>%
na.omit() %>%
filter(!st_is_empty(.))%>%
st_as_sf(coords = c("Long", "Lat"), crs = "EPSG:3358")%>%
distinct()
shoppingcen.sf <-
shoppingcen %>%
dplyr::select(geometry) %>%
na.omit() %>%
filter(!st_is_empty(.))%>%
st_as_sf(coords = c("Long", "Lat"), crs = "EPSG:3358")%>%
distinct()
policeoffice.sf <-
policeoffice %>%
dplyr::select(geometry) %>%
na.omit() %>%
filter(!st_is_empty(.))%>%
st_as_sf(coords = c("Long", "Lat"), crs = "EPSG:3358")%>%
distinct()
silver_stops <- st_read("Data/LYNX_Silver_Line_Stations_Proposed.geojson")%>%
st_transform('EPSG:3358')
silver_routes <- st_read("Data/LYNX_Silver_Line_Route_Proposed.geojson")%>%
st_transform('EPSG:3358')
blue_stops <-
st_read("Data/LYNX_Blue_Line_Stations.geojson")%>%
st_transform('EPSG:3358')
blue_routes <-
st_read("Data/LYNX_Blue_Line_Route.geojson")%>%
st_transform('EPSG:3358')
